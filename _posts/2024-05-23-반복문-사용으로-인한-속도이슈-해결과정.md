---
layout: post
title:  "ë°˜ë³µë¬¸ ì‚¬ìš©ìœ¼ë¡œ ì¸í•œ ì†ë„ ì´ìŠˆ í•´ê²° ê³¼ì •"
date:   2024-05-23 09:12:00 +0900
author: yrbyeon
categories: Array HashMap
---
<hr/>


ì´ë²ˆì— í™ˆí”ŒëŸ¬ìŠ¤ ê°€ê²© ì¡°ì‚¬ ì›¹ ë¦¬í¬íŠ¸ í”„ë¡œì íŠ¸ì˜ ë°±ì—”ë“œ ê°œë°œì„ ë§¡ìœ¼ë©° ì œê°€ ê²ªì—ˆë˜ ë°˜ë³µë¬¸ì˜ êµ´ë ˆ ì™€ ê·¸ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” ê¸´ ì‹œê°„ì—ì„œ ë²—ì–´ë‚˜ëŠ” ê³¼ì •ì— ëŒ€í•˜ì—¬ ì •ë¦¬í•´ë³´ì•˜ìŠµë‹ˆë‹¤.

## ë°˜ë³µë¬¸

ìš°ì„  ëª¨ë‘ ì•„ëŠ” ë‚´ìš©ì´ì§€ë§Œ ë°˜ë³µë¬¸ì´ë€ ë°˜ë³µì ìœ¼ë¡œ ì‹¤í–‰í•´ì•¼ í•˜ëŠ” ì½”ë“œê°€ ìˆì„ ë•Œ ì‚¬ìš©í•˜ë©° for, for..in, forâ€¦of, forEach, while, doâ€¦whileë“± ë‹¤ì–‘í•œ ì¢…ë¥˜ë¥¼ ìƒí™©ì— ë”°ë¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°™ì€ ì½”ë“œë¥¼ ì—¬ëŸ¬ ë²ˆ ì“°ëŠ” ëŒ€ì‹  ë°˜ë³µë¬¸ì„ ì‚¬ìš©í•˜ì—¬ ì§§ê³  ê°€ë…ì„± ì¢‹ê²Œ ì½”ë“œë¥¼ ì§¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ë²ˆì— ì œê°€ ì°¸ì—¬í–ˆë˜ í™ˆí”ŒëŸ¬ìŠ¤ ì›¹ ë¦¬í¬íŠ¸ì˜ ê²½ìš° ëŒ€ëŸ‰ì˜ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ í”¼ë²— í…Œì´ë¸”ì„ êµ¬í˜„í•˜ëŠ” ê²ƒì´ì—ˆëŠ”ë° ì´ í”¼ë²—í…Œì´ë¸”ì˜ êµ¬ì„±ì€ ê° í–‰ê³¼ ì—´ì˜ ë³µí•©ì ì¸ í•©ê³„ í˜¹ì€ í‰ê· ê°’ ìš”ì•½ìœ¼ë¡œ ì´ë£¨ì–´ì ¸ ìˆì—ˆìŠµë‹ˆë‹¤. ê° í–‰ê³¼ ì—´ì€ 8ê°œ, 3ê°œì˜ ì„ íƒ ê°’ì„ ì¡°í•©í•˜ì—¬ ë§Œë“¤ ìˆ˜ ìˆì—ˆê¸° ë•Œë¬¸ì— ì„ íƒ ê°’ì— ë”°ë¼ ìš”ì•½ê°’ì„ êµ¬í•˜ëŠ” íšŸìˆ˜ ë“± í…Œì´ë¸”ì˜ í˜•íƒœê°€ ë‹¬ë¼ì§€ê²Œ ë©ë‹ˆë‹¤.

![Untitled](/assets/images/yrbyeon/20240523/Untitled.png)

12ë§Œê°œê°€ ë„˜ëŠ” ëŒ€ëŸ‰ì˜ ë°ì´í„°ë“¤ì„ í™œìš©í•˜ì—¬ ê° í–‰ê³¼ ì—´ ì¡°ê±´ì— ë§ëŠ” ê°’ì„ DBì—ì„œ ì¡°íšŒí•œ í›„ ê·¸ ê°’ìœ¼ë¡œ ê°ê° ìš”ì•½ ê°’ì„ ê³„ì‚°í•´ì•¼ í•˜ëŠ” ë¡œì§ì„ ì§œì•¼ í–ˆìŠµë‹ˆë‹¤.

## ìš”ì•½ì˜ ìš”ì•½ì˜ ìš”ì•½ì˜ ìš”ì•½â€¦

ì €ëŠ” í…Œì´ë¸” ì „ì²´ë¥¼ í•˜ë‚˜ì˜ 2ì°¨ì› ë°°ì—´ë¡œ ë§Œë“¤ì–´ í–‰ê³¼ ì—´ì˜ ìš”ì•½ ê°’, ê·¸ë¦¬ê³  ê·¸ ìš”ì•½ ê°’ì˜ ìš”ì•½ ê°’ê¹Œì§€ ê³„ì‚°í•´ ë„£ì€ ë’¤ í”„ë¡ íŠ¸ì— ì „ë‹¬í•˜ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤. 

```jsx
db.getCollection("raw-data").aggregate([
	{
    $match:{
      Year: { '$in': [ '2425' ] },
		  Same_Similar: { '$in': [ '1' ] },
		  Care_Vegetable: { '$in': [ '0', '1' ] },
		  R_HM: { '$in': [ 'ë¯¸í–‰ì‚¬', 'ë¹„ì „ë‹¨', 'ì „ë‹¨' ] },
		  R_EM: { '$in': [ 'ë¯¸í–‰ì‚¬', 'ë¹„ì „ë‹¨', 'ì „ë‹¨' ] }
	  }
	},
	{
    $project: {
	    Price: 1,
		  Year: { '$ifNull': [ '$Year', '10. (ë¹„ì–´ ìˆìŒ)' ] },
		  Category: { '$ifNull': [ '$Category', '10. (ë¹„ì–´ ìˆìŒ)' ] },
		  Month: { '$ifNull': [ '$Month', '(ë¹„ì–´ ìˆìŒ)' ] },
		  Team: { '$ifNull': [ '$Team', '(ë¹„ì–´ ìˆìŒ)' ] },
		  Week: { '$ifNull': [ '$Week', '10. (ë¹„ì–´ ìˆìŒ)' ] },
		  Class: { '$ifNull': [ '$Class', '(ë¹„ì–´ ìˆìŒ)' ] }		 
    }
	},
	{
    $group: {
			 _id: {
		    column: {
		      Category: '$Category',
		      Team: '$Team',
		      Class: '$Class'
		    },
		    row: { 
			    Year: '$Year', 
				  Month: '$Month', 
				  Week: '$Week' 
			  }
		  },
		  value: { '$sum': '$Price' },
		  sum: { '$sum': '$Price' },
		  count: { '$count': {} }
		
    }

	},
	{
    $sort: {
      '_id.column.Category': 1,
		  '_id.column.Team': 1,
		  '_id.column.Class': 1,
		  '_id.row.Year': 1,
		  '_id.row.Month': 1,
		  '_id.row.Week': 1   
    }
	}
])
```

ìš°ì„  _idì— rowì™€ column ì •ë³´ë¥¼ ë„£ê³  ê·¸ë£¹í™”í•˜ì—¬ ë°ì´í„°ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.  

```jsx
// hyperData = 

[{
    "_id" : {
        "column" : {
            "Category" : "Category A",
            "Team" : "Team 1",
            "Class" : "Class A"
        },
        "row" : {
            "Year" : "2024",
            "Month" : "May",
            "Week" : "W01"
        }
    },
    "value" : NumberInt(5580),
    "sum" : NumberInt(5580),
    "count" : NumberInt(2)
},
{
    "_id" : {
        "column" : {
            "Category" : "Category A",
            "Team" : "Team 1",
            "Class" : "Class A"
        },
        "row" : {
            "Year" : "2024",
            "Month" : "May",
            "Week" : "W03"
        }
    },
    "value" : NumberInt(5580),
    "sum" : NumberInt(5580),
    "count" : NumberInt(2)
},
{
    "_id" : {
        "column" : {
            "Category" : "Category A",
            "Team" : "Team 1",
            "Class" : "Class A"
        },
        "row" : {
            "Year" : "2024",
            "Month" : "May",
            "Week" : "W06"
        }
    },
    "value" : NumberInt(5580),
    "sum" : NumberInt(5580),
    "count" : NumberInt(2)
},
{
    "_id" : {
        "column" : {
            "Category" : "Category A",
            "Team" : "12 Vegetable",
            "Class" : "Class A"
        },
        "row" : {
            "Year" : "2024",
            "Month" : "June",
            "Week" : "W08"
        }
    },
    "value" : NumberInt(5980),
    "sum" : NumberInt(5980),
    "count" : NumberInt(2)
},
{
    "_id" : {
        "column" : {
            "Category" : "Category A",
            "Team" : "Team 1",
            "Class" : "Class B"
        },
        "row" : {
            "Year" : "2024",
            "Month" : "June",
            "Week" : "W01"
        }
    },
    "value" : NumberInt(20970),
    "sum" : NumberInt(20970),
    "count" : NumberInt(3)
},
{
    "_id" : {
        "column" : {
            "Category" : "Category A",
            "Team" : "Team 1",
            "Class" : "Class B"
        },
        "row" : {
            "Year" : "2024",
            "Month" : "June",
            "Week" : "W03"
        }
    },
    "value" : NumberInt(12480),
    "sum" : NumberInt(12480),
    "count" : NumberInt(2)
},
{
    "_id" : {
        "column" : {
            "Category" : "Category A",
            "Team" : "Team 1",
            "Class" : "Class B"
        },
        "row" : {
            "Year" : "2024",
            "Month" : "June",
            "Week" : "W06"
        }
    },
    "value" : NumberInt(5990),
    "sum" : NumberInt(5990),
    "count" : NumberInt(1)
},
...more
]
```

ë°˜í™˜ ë˜ëŠ” ë°ì´í„°ëŠ” í…Œì´ë¸”ì˜ í—¤ë” ìš”ì†Œì™€ ê³„ì‚°ë˜ì§€ ì•Šì€ í°ìƒ‰ ì…€ì˜ ê°’ë“¤ì…ë‹ˆë‹¤. 

ì œê°€ ì§  ë¡œì§ì˜ ìˆœì„œëŠ”

1. í•„í„° ì¡°ê±´ìœ¼ë¡œ aggrgate ë©”ì„œë“œë¥¼ í†µí•´ ê·¸ë£¹í•‘í•œ ê¸°ë³¸ ë°ì´í„°ì™€ í—¤ë” ìš”ì†Œë¥¼ êµ¬í•œë‹¤.
2. ê° ì—´ê³¼ í–‰ì˜ í—¤ë” ì…€ ê°’ì„ 2ì°¨ì› ë°°ì—´ì— í…Œì´ë¸” í˜•íƒœë¡œ ë„£ëŠ”ë‹¤. (í‘œì˜ ìì£¼ìƒ‰, í•‘í¬ìƒ‰, ì—°í•‘í¬ìƒ‰ ìŒì˜ í—¤ë”)
3. ê¸°ë³¸ ë°ì´í„°ë¥¼ ë„£ëŠ”ë‹¤. (í‘œì˜ í°ìƒ‰ ìŒì˜ ìˆ«ì ê°’)
4. ì´ í•©ê³„ ê°’ì„ ë„£ëŠ”ë‹¤. (í‘œì˜ ì´ˆë¡ ìŒì˜ ìˆ«ì ê°’)
5. í–‰ ë°ì´í„°ì— ëŒ€í•œ ìš”ì•½ ê°’ì„ ê³„ì‚°í•˜ì—¬ ë„£ëŠ”ë‹¤ (í‘œì˜ íŒŒë€ ìŒì˜ ìˆ«ì ê°’)
6. ì—´ ë°ì´í„°ì— ëŒ€í•œ ìš”ì•½ ê°’ì„ ê³„ì‚°í•˜ì—¬ ë„£ëŠ”ë‹¤ (í‘œì˜ íšŒìƒ‰, ìì£¼ìƒ‰ ìŒì˜ ìˆ«ì ê°’)

ì…ë‹ˆë‹¤.

## 

![Untitled 1](/assets/images/yrbyeon/20240523/Untitled 1.png)

2ì°¨ì› ë°°ì—´ì— ê°ê° ê°’ì„ ë„£ì–´ì•¼ í–ˆê¸° ë•Œë¬¸ì— ë°˜ë³µë¬¸ì´ ì—¬ëŸ¬ ë²ˆ ì“°ì˜€ëŠ”ë° ë¬¸ì œëŠ” í–‰, ì—´ì˜ ì„ íƒ ê°’ì´ ë§ì„ ê²½ìš° ë¡œì§ ì²˜ë¦¬ ì‹œê°„ì´ ë§¤ìš° ê¸¸ì–´ì¡Œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. console.timeìœ¼ë¡œ ê±¸ë¦¬ëŠ” ì‹œê°„ì„ í™•ì¸í•´ë³´ë‹ˆ 2ë²ˆê³¼ 3ë²ˆ ê³¼ì •ì—ì„œ 60ì´ˆ ì •ë„ì˜ ë„ˆë¬´ë‚˜ ê¸´ ì‹œê°„ì´ ì†Œìš”ë˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤. 

ê¸°ì¡´ì˜ ë¡œì§ì€ DBì—ì„œ ì¡°íšŒí•œ ë°°ì—´ ë°ì´í„° ìš”ì†Œì˜ _idì— ìˆëŠ” row ê°’ìœ¼ë¡œ í—¤ë”ë¥¼ ìƒì„±í•˜ê³   idì˜ column ê°’ë“¤ë¡œ ë°˜ë³µë¬¸ì„ ëŒë ¤ ê° row ê°’ì˜ í—¤ë”ì— ë§ëŠ” ìˆ«ì ê°’ì„ 2ì°¨ì› ë°°ì—´ì— ë„£ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.

```jsx
// [2] í…Œì´ë¸” í—¤ë”ì— ë“¤ì–´ê°€ëŠ” ë‚´ìš©ì„ ê°ê° í–‰, ì—´ì„ ë‚˜ëˆ„ì–´ ë°°ì—´ì— ë„£ìŒ.
const headerRows = [];
const headerColumn = [];

// hyperData: DBì—ì„œ ì¡°íšŒí•œ ë°ì´í„°
hyperData.forEach((data) => {
  const { _id } = data;
  const { row, column } = _id;
  // idì—ì„œ í•´ë‹¹ ê°’ì˜ row, column ì •ë³´ë¥¼ í™•ì¸
  
  let labelR = '';
  Object.values(row).forEach((r) => {
    labelR += `${r}/&/`;
  });
  if (!headerRows.includes(labelR)) headerRows.push(labelR);
  let labelC = '';
  Object.values(column).forEach((c) => {
    labelC += `${c}/&/`;
  });
  if (!headerColumn.includes(labelC)) headerColumn.push(labelC);
});
headerRows.sort();

const rowArray = [[]];
// ì—´ í—¤ë” ìƒì„±.
rows.forEach((r) => {
  rowArray[0].push({
    rowspan: 1,
    colspan: 1,
    value: `${r}`,
  });
  rowArray.push([]);
});
headerRows.forEach((ro) => {
  const roArr = ro.split('/&/');
  for (let i = 1; i < rows.length + 1; i++) {
    rowArray[i].push({
      rowspan: 1,
      colspan: 1,
      value: roArr[i - 1],
    });
  }
});
```

```jsx
//ì—´ í—¤ë” ê°¯ìˆ˜ë§Œí¼ ë°˜ë³µë¬¸
for (let i = 0; i < rowArray[rows.length].length; i++) {
  const idObj = { row: {}, column: {} };
  
  headerColumn.forEach((hc, hcI) => {
  
    // idObj ê°ì²´ ìƒì„±
    const hcArr = hc.split('/&/');
    hcArr.pop();
    hcArr.forEach((hcItem, ii) => {
      idObj.column[columns[ii]] = hcItem;
    });
    rows.forEach((rr, ii) => {
      idObj.row[rr] = rowArray[ii + 1][i].value;
    });
    
    let pushItem: {
      rowspan: number;
      colspan: number;
      value: number | string;
      valSum?: number;
      valCnt?: number;
    } = {
      rowspan: 1,
      colspan: 1,
      value: ''
    };

    // [3] idObjì— í•´ë‹¹í•˜ëŠ” ìˆ«ì ê°’ ë„£ê¸° -> ë§ì€ ì‹œê°„ ì†Œìš”
    hyperData.forEach((hypers) => {
      const { _id, value, count } = hypers;
      const { row: rId, column: cId } = _id;
      //idObjì˜ row, column ê°’ê³¼ ê°™ì€ ê°’ì„ ì°¾ê¸° ìœ„í•´ hyperData ì „ì²´ë¥¼ ë‹¤ì‹œ ë°˜ë³µë¬¸ ëŒë ¤ ê²€ì‚¬
      if (
        Object.entries(idObj.row).toString() ===
          Object.entries(rId).toString() &&
        Object.entries(idObj.column).toString() ===
          Object.entries(cId).toString()
      ) {
        pushItem = {
          rowspan: 1,
          colspan: 1,
          value: Math.round(value),
          valSum: value,
          valCnt: count
        };
      }
    });
    if (rowArray.length < hcI + rows.length + 2) rowArray.push([]);
    rowArray[hcI + rows.length + 1].push(pushItem);
  });
}
```

DBì—ì„œ ì¡°íšŒí•œ ë°°ì—´ ë°ì´í„°ì˜ ê¸¸ì´ëŠ” ìµœëŒ€ 5000ì´ ë„˜ìœ¼ë©° ë°˜ë³µë¬¸ ë‘ ê°œë¥¼ ëŒë ¤ í–‰ê³¼ ì—´ ì¡°ê±´ì„ í™•ì¸í•˜ì—¬ 2 ì°¨ì› ë°°ì—´ì— ë„£ê³  ìˆì—ˆëŠ”ë° ì´ ë•Œë¬¸ì— ì „ì²´ ë°˜ë³µë¬¸ì´ ë„ëŠ” íšŸìˆ˜ëŠ” 5000*5000 íšŒê°€ ë˜ëŠ” ì¼ì´ ë°œìƒí•˜ê²Œ ëœ ê²ƒì…ë‹ˆë‹¤. ì´ í”„ë¡œì íŠ¸ì˜ ê²½ìš° ì£¼ë§ˆë‹¤ ë°ì´í„°ê°€ ê³„ì†í•´ì„œ ì¶”ê°€ë˜ê¸° ë•Œë¬¸ì— ì†ë„ ë¬¸ì œë¥¼ ìš°ì„ ì ìœ¼ë¡œ í•´ê²°í•´ì•¼ í–ˆìŠµë‹ˆë‹¤.

[3] ì—ì„œ hyperDataë¡œ ì „ì²´ ë°˜ë³µë¬¸ì„ í•œë²ˆ ë” ëŒë¦¬ëŠ” ê²ƒì´ ì†ë„ ì €í•˜ì˜ í° ì›ì¸ì´ë¼ëŠ” ê²ƒì„ ì•Œê²Œ ë˜ì–´ ë°˜ë³µë¬¸ì„ ëŒë¦¬ì§€ ì•Šì€ ì±„ idê°’ì„ ë¹„êµí•´ì„œ ìˆ«ì ê°’ì„ ì°¾ì•„ ë°°ì—´ì— ë„£ëŠ” ë°©ë²•ìœ¼ë¡œ ë°”ê¿”ì•¼ í–ˆìŠµë‹ˆë‹¤. ë°˜ë³µë¬¸ ëŒ€ì‹  idê°ì²´ ë‚´ìš©ì„ í¬í•¨í•˜ëŠ” keyê°’ì„ ë§Œë“¤ì–´  hashmapì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.

## HashMap

ë°°ì—´(Array)ê³¼ ë§µ(Map)ì— ê´€í•´ì„œ ìë£Œêµ¬ì¡°ë¥¼ ì²˜ìŒ ê³µë¶€ í•  ë•Œ ë°°ì› ë˜ ê¸°ì–µì´ ë‚©ë‹ˆë‹¤. HashMapì€ í‚¤(Key)ì™€ ê°’(Value) ìŒì„ ì €ì¥í•˜ëŠ” ìë£Œêµ¬ì¡°ì…ë‹ˆë‹¤. ê° í‚¤ëŠ” ê³ ìœ í•˜ë©° í‚¤ë¥¼ ì‚¬ìš©í•˜ì—¬ í•´ë‹¹í•˜ëŠ” ê°’ì„ ë¹ ë¥´ê²Œ ê²€ìƒ‰í•  ìˆ˜ ìˆëŠ” íŠ¹ì§•ì„ ê°–ê³  ìˆìŠµë‹ˆë‹¤. ë¶„ëª… ì•Œê³  ìˆëŠ” ê°œë…ì´ì§€ë§Œ í”„ë¡œì íŠ¸ì—ì„œ ì œëŒ€ë¡œ ì¨ ë³¸ ê¸°ì–µì´ ì—†ì—ˆë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤. 

ì´ ë°–ì— HashMapì˜ íŠ¹ì§•ìœ¼ë¡œëŠ”

1. í‚¤ ê¸°ë°˜ì˜ ë¹ ë¥¸ ì•¡ì„¸ìŠ¤: í‚¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¹ ë¥´ê²Œ ê²€ìƒ‰, ìˆ˜ì • ê°€ëŠ¥
2. ~~ìˆœì„œë¥¼ ë³´ì¥í•˜ì§€ ì•ŠìŒ: ë‚´ë¶€ì ìœ¼ë¡œ í‚¤ì˜ ìˆœì„œë¥¼ ë³´ì¥í•˜ì§€ ì•ŠìŒ~~ Mapì€ ìˆœì„œë¥¼ ë³´ì¥í•œë‹¤: HashMap ì˜ ê²½ìš° ìˆœì„œë¥¼ ë³´ì¥í•˜ëŠ” LinkedHashMapì´ ìˆë‹¤.
3. í‚¤ì˜ ì¤‘ë³µ ë¶ˆê°€: ì´ë¯¸ ì¡´ì¬í•˜ëŠ” í‚¤ì— ê°’ì„ ì €ì¥í•˜ë©´ ê¸°ì¡´ ê°’ì´ ë®ì–´ ì”Œì›Œì§.
4. nullí‚¤ì™€ null ê°’ ì €ì¥ ê°€ëŠ¥: í‚¤ ì¤‘ë³µì´ ë¶ˆê°€ëŠ¥ í•˜ë¯€ë¡œ null ê°’ì€ í•˜ë‚˜ë§Œ ì €ì¥ ê°€ëŠ¥
5. ì–´ë–¤ ê°ì²´ë“  í‚¤ë¡œ ì‚¬ìš© ê°€ëŠ¥

ì´ëŸ¬í•œ íŠ¹ì§•ì€ í˜„ì¬ ìƒí™©ì˜ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ë° ìš”êµ¬ ì‚¬í•­ì— ì˜ ë“¤ì–´ë§ì•˜ìŠµë‹ˆë‹¤. ì• ì´ˆë¶€í„° ë°°ì—´ì˜ ë°˜ë³µë¬¸ì´ ì•„ë‹Œ HashMapì„ ì‚¬ìš©í•˜ì—¬ ì½”ë“œë¥¼ ì‘ì„±í•´ì•¼ í–ˆë˜ ê²ƒì…ë‹ˆë‹¤. 

```jsx
for (let i = 0; i < rowArray[rows.length].length; i++) {
  const idObj = { row: {}, column: {} };
  const hyperDataHash = new Map();
  
  hyperData.forEach(hypers => {
    const { _id, value, count, sum } = hypers;
    const { row: rId, column: cId } = _id;    
    // _id ê°ì²´ì˜ row, column ê°ì²´ë¥¼ keyë¡œ ê°€ì§€ëŠ” HashMap êµ¬ì¡° ìƒì„±
    hyperDataHash.set(
      `${Object.entries(rId).toString()}_${Object.entries(cId).toString()}`,
      { value, count, sum },
    );
  });
	
	// idObj ê°ì²´ ìƒì„±
  headerColumn.forEach((hc, hcI) => {
    const hcArr = hc.split('/&/');
    hcArr.pop();
    hcArr.forEach((hcItem, ii) => {
      idObj.column[columns[ii]] = hcItem;
    });
    rows.forEach((rr, ii) => {
      idObj.row[rr] = rowArray[ii + 1][i].value;
    });
    
    let pushItem: {
      rowspan: number;
      colspan: number;
      value: number | string;
      valSum?: number;
      valCnt?: number;
    } = {
      rowspan: 1,
      colspan: 1,
      value: '',
    };

		//HashMap ì—ì„œ idObj ì •ë³´ë¡œ Keyë¥¼ ì¡°íšŒí•˜ì—¬ value ì¶”ì¶œ
    const hashData = hyperDataHash.get(
      `${Object.entries(idObj.row).toString()}_${Object.entries(
        idObj.column,
      ).toString()}`,
    );
    if (hashData) {
      const { value, count, sum } = hashData;
      pushItem = {
        rowspan: 1,
        colspan: 1,
        value: Math.round(value),
        valSum: sum,
        valCnt: count,
      };
    }
    if (rowArray.length < hcI + rows.length + 2) rowArray.push([]);
    rowArray[hcI + rows.length + 1].push(pushItem);
  });
}
```

ë°˜ë³µë¬¸ì„ ëŒë¦¬ë©° ìš”ì†Œë¥¼ í•˜ë‚˜í•˜ë‚˜ ë¹„êµí•˜ì—¬ í•´ë‹¹í•˜ëŠ” ê°’ì„ ì°¾ëŠ” ê³¼ì •ì´ ì•„ë‹Œ í‚¤ ê°’ìœ¼ë¡œ í•´ë‹¹í•˜ëŠ” ê°’ì„ ì¶”ì¶œí•˜ëŠ” ë°©ì‹ì´ê¸° ë•Œë¬¸ì— í›¨ì”¬ ë¹ ë¥¸ ì†ë„ë¡œ ì½”ë“œë¥¼ ì‹¤í–‰ í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

![Untitled 2](/assets/images/yrbyeon/20240523/Untitled 2.png)

---

### í›„ê¸°

ì•Œê³  ìˆëŠ” ê°œë…ğŸ’«ì´ì§€ë§Œ Mapì„ í™œìš©í•˜ì—¬ ì½”ë“œë¥¼ ì§œ ë³¸ ê²ƒì´ ì˜¤ëœë§Œì´ì—ˆìŠµë‹ˆë‹¤.ğŸ¤” ì‚¬ì‹¤ ë°°ì—´ ë°˜ë³µë¬¸ğŸŒ€ì„ ëŒë¦¬ë©´ì„œë„â˜¹ï¸ ì´ëŸ° ì‹ìœ¼ë¡œ ì½”ë“œë¥¼ ì§œë©´ ì•ˆë  ê²ƒ ê°™ë‹¤ê³ ğŸ¥º ë‚´ì‹¬ ë¶ˆì•ˆí•œ ë§ˆìŒì´ ë“¤ì—ˆëŠ”ë°ğŸ˜¨ ì‹¤ì œë¡œ í•˜ì—¼ì—†ì´ ê¸¸ì–´ì§€ëŠ” ë¡œë”© í™”ë©´ì„ ë³´ë©°ğŸ˜°, ê·¸ë¦¬ê³  í•œ ë²ˆ ì„œë²„ê°€ ì£½ì–´ë²„ë¦° ê²ƒì„ ë³´ë©°ğŸ˜± ì”ì“¸í•œ ê¸°ë¶„ê³¼ í•¨ê»˜ğŸ˜’ ì†ì´ ì½± ë§‰íˆëŠ” ëŠë‚Œì—ğŸ¤¢ ë‹µë‹µí•´ì„œ ê²¬ë”œ ìˆ˜ê°€ ì—†ì—ˆìŠµë‹ˆë‹¤.ğŸ¤® 

ìƒì„±í•œ idë¥¼ keyì²˜ëŸ¼ í™œìš©í•´ì•¼ê² ë‹¤ëŠ” ìƒê°ì„ í•˜ë©´ì„œ ì™œğŸ¤” ì†ê°€ë½ì€ ë°˜ë³µë¬¸ì„ ì—¬ëŸ¬ ë²ˆ ëŒë¦¬ê³  ìˆì—ˆëŠ”ì§€ ëª¨ë¥´ê² ìŠµë‹ˆë‹¤. ì‹ ì£¼ì„ë‹˜ê»˜ì„œ êµ³ì–´ë²„ë¦° ì œ ë‡ŒğŸ§ ì— ë§ì€ ë„ì›€ì„ ì£¼ì…¨ìŠµë‹ˆë‹¤.ğŸ™‡â€â™€ï¸ğŸ™ ê¸€ì„ ë§ˆì¹˜ë©° ë‹¤ì‹œ í•œ ë²ˆ ê°ì‚¬í•˜ë‹¤ê³  ë§ì”€ë“œë¦½ë‹ˆë‹¤.ğŸ™‡â€â™€ï¸ğŸ™ ë¹¨ë¼ì§„ í™”ë©´ì„ ë³¼ ë•Œë§ˆë‹¤ ì œ ì†ì´ ë‹¤ ì‹œì›í•©ë‹ˆë‹¤.ğŸ˜†