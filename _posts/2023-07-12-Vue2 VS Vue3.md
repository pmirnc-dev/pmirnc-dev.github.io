---
layout: post
title:  "Vue2ì™€ Vu3ì˜ ì°¨ì´ì "
date:   2023-07-12 11:00:00 +0900
author: dhjeon
categories: Vue
---

### ëª©ì°¨
- [Options Api ë°©ì‹](#1-options-api-ë°©ì‹)     
- [Composition Api ë°©ì‹](#2-composition-api-ë°©ì‹-with-setup)
- [v-model ì„ ì–¸ ë°©ì‹](#v-model-ì„ ì–¸-ë°©ì‹-ì°¨ì´)
  - [Vue2](#vue2-ì—ì„œì˜-ë°©ë²•)
  - [Vue3](#vue3-ì—ì„œì˜-ë°©ë²•)
- [Computed ì„ ì–¸ ë°©ì‹](#computed-ì„ ì–¸-ë°©ì‹-ì°¨ì´)
  - [Vue2](#vue2-ec9790ec849cec9d98-ebb0a9ebb295-1)
  - [Vue3](#vue3-ec9790ec849cec9d98-ebb0a9ebb295-1)
- [Watch / Prop ì„ ì–¸ ë°©ì‹](#watch--props-ì„ ì–¸-ë°©ì‹-ì°¨ì´)
  - [Vue2](#vue2-ec9790ec849cec9d98-ebb0a9ebb295-2)
  - [Vue3](#vue3-ec9790ec849cec9d98-ebb0a9ebb295-2)
- [Emit ì„ ì–¸ ë°©ì‹](#emit-ì„ ì–¸-ë°©ì‹-ì°¨ì´)
  - [Vue2](#vue2-ec9790ec849cec9d98-ebb0a9ebb295-3)
  - [Vue3](#vue3-ec9790ec849cec9d98-ebb0a9ebb295-3)
- [Route / Router ì„ ì–¸ ë°©ì‹](#router--route-ì„ ì–¸-ë°©ì‹-ì°¨ì´)
  - [Vue2](#vue2-ec9790ec849cec9d98-ebb0a9ebb295-4)
  - [Vue3](#vue3-ec9790ec849cec9d98-ebb0a9ebb295-4)
- [Store ì„ ì–¸ ë°©ì‹](#store-ì„ ì–¸-ë°©ì‹-ì°¨ì´)
  - [Vue2](#vue2-ec9790ec849cec9d98-ebb0a9ebb295-5)
  - [Vue3](#vue3-ec9790ec849cec9d98-ebb0a9ebb295-5)

---

<br />

ìµœê·¼ì— Vue 2 ë²„ì „ì´ 2.7 ë²„ì „ì„ ëìœ¼ë¡œ ì—…ë°ì´íŠ¸ê°€ ì¢…ë£Œëœë‹¤ëŠ” ì†Œì‹ì„ ë“£ê²Œ ë˜ì–´ Vue 3 ë²„ì „ê³¼ ì–´ë–¤ ì°¨ì´ì ì´ ìˆëŠ”ì§€ ì œê°€ ì•Œê³  ìˆëŠ” ì„ ì—ì„œ ê³µìœ  ë“œë¦¬ê³ ì ì´ ì£¼ì œë¡œ ê¸€ì„ ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.

<br />

<center>
    <img src="../assets/images/dhjeon/vue/vue1.png" alt="vue" width="600" />
</center>

<br />
ë²„ì „ì´ ì˜¬ë¼ê°€ë©´ì„œ ë¼ì´í”„ì‚¬ì´í´ì—ë„ ì•½ê°„ì˜ ë³€í™”ê°€ ìƒê¸°ê¸´ í–ˆì§€ë§Œ ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” ì‚¬ìš©í•˜ëŠ” ë¬¸ë²• ìœ„ì£¼ë¡œ ì†Œê°œí•´ë³´ë ¤ê³  í•©ë‹ˆë‹¤.


<br />

**Vue 2** ì—ì„œì˜ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„± ë°©ì‹ì€ **Options API** ë°©ì‹ê³¼ **Class Component** ë°©ì‹ 2 ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤.

<center>
    (ì €í¬ëŠ” Class Component í˜•íƒœë¡œ ì£¼ë¡œ ì‚¬ìš©í•˜ê³  ìˆì£ )
</center>

<br />

Options API ê°€ **OOP ë¥¼ ë°°ê²½**ì„ ë‘ê³  ë§Œë“¤ì–´ì¡Œê¸° ë•Œë¬¸ì— **Class ê¸°ë°˜**ìœ¼ë¡œ ì˜ ë§ëŠ”ë‹¤ê³  í•©ë‹ˆë‹¤.


### 1. Options API ë°©ì‹

Options API ë°©ì‹ì€ `data`, `methods`, `mounted` ì™€ ê°™ì€ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ì˜ ë¡œì§ì„ ì •ì˜í•˜ëŠ” ë°©ë²•ì„ ëœ»í•©ë‹ˆë‹¤.

```typescript
// Options API
export default Vue.extend({
	name: "SampleComponent",
	data: () => { return { sample: ''} },
	methods: {},
	mounted: {}.
}

// Class í˜• Component
export default class SampleComponent extends Vue {
	sample = '';
})
```

Vue ê°ì²´ë¥¼ extends ë°›ì•„ì„œ ìƒˆë¡œìš´ Component ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ë°©ì‹

### 2. Composition API ë°©ì‹ with setup()

Vue 3ë¡œ ë²„ì „ì´ ì˜¬ë¼ê°€ë©´ì„œ ìƒˆë¡­ê²Œ ì¶”ê°€ëœ ë°©ì‹ìœ¼ë¡œ Composition API ë°©ì‹ê³¼ setup() ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.

setup í•¨ìˆ˜ë¥¼ ì´ìš©í•˜ëŠ” ë°©ë²•ì€ 2 ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤.

ê¸°ì¡´ Vue2ì—ì„œ ì‚¬ìš©í–ˆë˜ ë¬¸ë²•ì— setup() í•¨ìˆ˜ë§Œ ì¶”ê°€í•´ì£¼ë©´ ë©ë‹ˆë‹¤.         
ë‹¤ë§Œ ì´ë ‡ê²Œ ì‚¬ìš©í•  ê²½ìš° ë°˜ë“œì‹œ ì‚¬ìš©ëœ **ë³€ìˆ˜ ë˜ëŠ” í•¨ìˆ˜ì— ëŒ€í•´ì„œ return ìœ¼ë¡œ ë‚´ë³´ë‚´ì¤˜ì•¼ template ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.**

```typescript
export default defineComponent({
	copmonents: {},
	setup() {
        // ë³€ìˆ˜ ì„ ì–¸
		const sample = ref('sample');

        // í•¨ìˆ˜ ì„ ì–¸
        const onClickHandler = () => {
            console.log(`click`);
        }

		return {
			sample, onClickHandler
		}
	}
})
```

<br />

ì´ ë°©ë²•ì„ ë³´ì™„í•˜ê³ ì ë‚˜ì˜¨ê²Œ **script setup ë¬¸ë²•**ì…ë‹ˆë‹¤.

<br />

```typescript
<script lang='ts' setup>
// í•„ìš”í•œ ì»´í¬ë„ŒíŠ¸ëŠ” ë‹¨ìˆœ import ë§Œ í•´ì£¼ë©´ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

const sample = ref('')

</script>
```

srcript ì•ˆì— setup ë§Œ ë„£ì–´ì£¼ë©´ return ë¬¸ ì—†ì´ ë°”ë¡œ template ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

setup í•¨ìˆ˜ ë‚´ì—ì„œ Reactì²˜ëŸ¼ `render í•¨ìˆ˜`ì™€ `JSX`ë¥¼ ì§€ì›í•˜ê³ ìˆì–´ `template` ì—†ì´ ì»´í¬ë„ŒíŠ¸ë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆë‹¤ê³  í•˜ëŠ”ë° ì´ ë°©ë²•ì€ ì•„ì§ ì•ˆí•´ë´¤ìŠµë‹ˆë‹¤..ã…ã…

ì»´í¬ì§€ì…˜ APIê°€ ì¶”ê°€ ë¡œì§ ì¬ì‚¬ìš© ë° ì½”ë“œ êµ¬ì„± ì´ì ê³¼ í•¨ê»˜ ë›°ì–´ë‚œ TypeScript í†µí•©ì„ ì œê³µí•œë‹¤ëŠ” ì ì„ ê°ì•ˆí•  ë•Œ **Vue 3ì—ì„œ Class APIë¥¼ ë” ì´ìƒ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²ƒì´ ì¢‹ë‹¤**. ë¼ê³  í•©ë‹ˆë‹¤.

<center>
(CompositionAPI ë°©ì‹ì€ Vue2.7 ë²„ì „ì—ì„œëŠ” ì‚¬ìš© ê°€ëŠ¥)
</center>

<br />

## v-model ì„ ì–¸ ë°©ì‹ ì°¨ì´

---

### Vue2 ì—ì„œì˜ ë°©ë²•

<br />

Vue 2ì—ì„œ Data ë³€ìˆ˜ë¥¼ ì„ ì–¸í•  ë•Œ data í•¨ìˆ˜ ë‚´ë¶€ì— ì„ ì–¸í•´ì£¼ê±°ë‚˜ Class ë‚´ë¶€ì— ì„ ì–¸ë§Œ í•´ì£¼ë©´ ë³€ìˆ˜ ì„ ì–¸ì´ ëì´ë‚˜ê²Œ ë©ë‹ˆë‹¤.

```typescript
export default {
    data() {
        return {
            isLoading = true;
            recipeId = '';
            recipeLists = [];
        }
    }
}

export default class SampleComponent extends Vue {
    isLoading = true;
    recipeId = '';
    recipeLists: Recipe.info[] = [];
}

```

### Vue3 ì—ì„œì˜ ë°©ë²•

<br />

#### 1. Ref ë¥¼ ì‚¬ìš©í•œ ë°©ë²•

Vue3 ì´ì „ì—ëŠ” ë·° í…œí”Œë¦¿ì˜ **DOM** ë˜ëŠ” **ì»´í¬ë„ŒíŠ¸**ë¥¼ ê°€ë¦¬í‚¤ëŠ” **ì†ì„±**ì´ì—ˆì§€ë§Œ, Vue3ì—ì„œëŠ” `reactive reference`ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.

<br />

```typescript
<script setup lang='ts'>
import { ref, Ref } from "vue";

const isLoading: Ref<boolean> = ref(true);
const recipeId: Ref<string> = ref('');
const recipeLists: Ref<Recipe.Info[]> | Recipe.Info[] = ref([]);
</script>
```

<br />

**ì›ì‹œí˜• ë°ì´í„°**ëŠ”Â `ref`ë¡œ ì´ìš©í•˜ì—¬ ë°˜ì‘í˜• ë°ì´í„°ë¥¼ ê´€ë¦¬ (Object ì™€ ê°™ì€ íƒ€ì…ë„ ì„ ì–¸ ê°€ëŠ¥í•©ë‹ˆë‹¤. <íƒ€ì…ì˜ ì˜í–¥ì„ ë°›ì§€ ì•ŠìŒ>)

ë°ì´í„° ì ‘ê·¼ ë°©ì‹ : `isLoading.value`, `recipeId.value` ì™€ ê°™ì´ .valueë¥¼ í†µí•˜ì—¬ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

value ê°’ì„ ë³€ê²½í•˜ê±°ë‚˜ ê°€ì ¸ì˜¬ ë•Œë„ ë™ì¼í•˜ê²Œ .valueë¡œ ì ‘ê·¼í•˜ë©´ ë©ë‹ˆë‹¤.

<br />

```text
ğŸ’¡ ì›ì‹œí˜• ë°ì´í„°

boolean, number, string, undefined, null, symbol
```

<br />

#### 2. Reactiveë¥¼ ì‚¬ìš©í•œ ë°©ë²•

<br />

```typescript
<script setup lang='ts'>
import { reactive } from "vue";

interface STATE {
    isLoading: boolean;
    recipeId: string;
    recipeLists: Recipe.info[];
}

const state: STATE = reactive({
    isLoading: true,
    recipeId: '',
    recipeLists: [],
});
// state ê°ì²´ì—ì„œ êº¼ë‚´ì„œ ì‚¬ìš© ê°€ëŠ¥
const { isLoading, recipeId, recipeLists } = state;
</script>
```

ì°¸ì¡°í˜• ë°ì´í„°ëŠ”Â `Reactive` ë¥¼ ì‚¬ìš©

Vue2ì—ì„œ ì‚¬ìš©í•˜ëŠ” data() ë‚´ì— ì„ ì–¸í•˜ëŠ” ë°©ì‹ê³¼ ë¹„ìŠ·í•©ë‹ˆë‹¤.

<br />

```text
ğŸ’¡ ì°¸ì¡°í˜• ë°ì´í„°

Array, Object, Map, Set ë“±
```

<br />

## Computed ì„ ì–¸ ë°©ì‹ ì°¨ì´

---

### Vue2 ì—ì„œì˜ ë°©ë²•

<br />

```typescript
export default {
    computed: {
        isLogin: function() {
            return this.$store.getters["utilModule/isLogin"];
        }
    }
}

get isLogin() {
    return this.$store.getters["utilModule/isLogin"];
}
```

### Vue3 ì—ì„œì˜ ë°©ë²•

<br />

```typescript
import { computed, ComputedRef } from "vue";
import stroe from "@coponents/store";

const isLogin: ComputedRef<boolean> = computed(() => store.getters["utilModule/isLogin"]);
```

vue ì—ì„œ `computed` ë¥¼ import ë°›ì•„ ì‚¬ìš©í•©ë‹ˆë‹¤.      
ë˜í•œ ComputedRef Typeì„ ì§€ì›í•˜ê³  ìˆì–´ íƒ€ì…ì„ ì§€ì •í•´ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.


<br />

## Watch / Props ì„ ì–¸ ë°©ì‹ ì°¨ì´

---

### Vue2 ì—ì„œì˜ ë°©ë²•

<br />

```typescript
import { Prop, Watch } from 'vue-property-decorator';

@Prop({ default: false }) readonly isOpen: boolean;

@Watch('isOpen')
watchProps() {
    // logic ì‘ì„±
}
```

<br />

### Vue3 ì—ì„œì˜ ë°©ë²•

<br />

```typescript
import { defineProps, withDefaults, defineEmits, watch } from "vue";

const props1 = defineProps({
    isOpen: {
        type: boolean,
        required: true,
    }
}) // default ê°’ ì—†ìŒ
const propsDefault = withDefaults(defineProps<{ isOpen: boolean }>(), { isOpen: false })

watch(route, () => keyword.value = '', { deep: true, immediate: false })
```

vueì—ì„œ í•„ìš”í•œ í•¨ìˆ˜ë¥¼ import í•˜ì—¬ ì‚¬ìš©í•©ë‹ˆë‹¤.

`defineProps` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ Propsë¥¼ ì„ ì–¸í•˜ê³ ,      
`withDefaults` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ Propì˜ ê¸°ë³¸ê°’ì„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```text
ğŸ’¡ **deepì´ë‚˜ immediateì´ë€?**    

deep: ì§€ì •í•œ ì†ì„±ì•ˆì— ìˆìœ¼ë©´, ê·¸ ì†ì„± ë˜í•œ ê°ì‹œ ëŒ€ìƒìœ¼ë¡œ ì§€
immediate: í˜ì´ì§€ë¥¼ ì½ì–´ë“¤ì¼ ë•Œì—ë„ watchë¥¼ ì‹¤í–‰
```

ê¸°ë³¸ì ìœ¼ë¡œ watchëŠ” ì§€ì •í•œ ì†ì„±ë§Œ ê°ì‹œí•˜ëŠ”ë° deep trueë¥¼ ì¤¬ì„ ê²½ìš° ì§€ì •í•œ ê°’ì˜ ë‚´ë¶€ì•ˆì˜ ê°’ ë˜í•œ ê°ì‹œ ëŒ€ìƒìœ¼ë¡œ ì˜¬ë¦½ë‹ˆë‹¤.      

í˜ì´ì§€ê°€ ì‹¤í–‰ë˜ëŠ” ì‹œì ì—ëŠ” watchê°€ ë™ì‘í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

<br />

## Emit ì„ ì–¸ ë°©ì‹ ì°¨ì´

---

### Vue2 ì—ì„œì˜ ë°©ë²•

<br />

```typescript
import { Emit } from 'vue-property-decorator';

// 1. Decorator ì‚¬ìš©
@Emit('closeMenu')
closeMenu() {
  .
  return !isOpen;
}

// 2. Vue ê°ì²´ ì´ìš© 
closeMenu() {
	.
	return this.$emit('uploadResult', !isOpen);
}
```

### Vue3 ì—ì„œì˜ ë°©ë²•

<br />

```typescript
import { defineEmits } from "vue";

// emit Event ì •ì˜
const emit = defineEmits(['closeMenu']);

// ì •ì˜í•œ ì´ë²¤íŠ¸ í˜¸ì¶œ
const sendDataToParentComponent = (isOpen: boolean) => {
	emit('closeMenu', !isOpen);
};
```

<br />

## Router / Route ì„ ì–¸ ë°©ì‹ ì°¨ì´

---

### Vue2 ì—ì„œì˜ ë°©ë²•

<br />

```typescript
this.$router.push('/');

const { title } = this.$route.query as { title: string };
```

<br />

### Vue3 ì—ì„œì˜ ë°©ë²•

<br />

```typescript
import { useRouter, useRoute } from "vue-router";

const router = useRouter();
const route = useRoute();

const redirect = (): void => {
	router.push('/');
}

const { title } = route.query as { title: string };
```

`useRouter()` `useRoute()` í›…ì„ í˜¸ì¶œí•˜ì—¬ ë¼ìš°í„° ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br />

## Store ì„ ì–¸ ë°©ì‹ ì°¨ì´

---

### Vue2 ì—ì„œì˜ ë°©ë²•

<br />

```typescript
this.$store.dispatch('socketStore/readMessageAll', this.userId)
```

### Vue3 ì—ì„œì˜ ë°©ë²•

<br />

```typescript
import store from '@/store';

store.commit("utilModule/setCurrentPath", 0);
```

#### Strore import ì‹œ ì£¼ì˜í• ì 

<br />

```typescript
import { useStore } from "vuex";

const store = useStore();

store.commit("utilModule/setCurrentPath", 0);
```

**setup í•¨ìˆ˜ ë‚´ì— useStore() í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ê²½ìš°** ì½˜ì†”ì—ì„œ ì•„ë˜ì™€ ê°™ì€ ê²½ê³  ë¬¸êµ¬ë¥¼ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```bash
â— vue warn inject() can only be used inside setup() or functional components
```

useStore() í›…ì„ í†µí•´ store ê°ì²´ë¥¼ ë°”ë¡œ í˜¸ì¶œí•˜ê¸° ë³´ë‹¤ëŠ” **createStore() ì´ìš©í•˜ì—¬ ë§Œë“¤ì–´ì§„ storeë¥¼ í˜¸ì¶œ**í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë³€ê²½í•˜ë©´ ê²½ê³  ë¬¸êµ¬ëŠ” ì‚¬ë¼ì§€ê²Œ ë©ë‹ˆë‹¤.

```typescript
// src > stroe > index.ts

import { createStore } from "vuex";
import createPersistedState from "vuex-persistedstate";

export default createStore({
  plugins: [
    createPersistedState({
      paths: [],
    }),
  ],
  modules: {},
});
```


